version: 0.2.0.{build}
environment:
  nodejs_version: "6"
# Install scripts. (runs after repo cloning)
install:
  # Get the latest stable version of Node.js or io.js
  - ps: Install-Product node $env:nodejs_version
  - ps: -NoProfile -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" 
  - ps: SET "PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin"
  # install modules
  - npm install
  - choco install gradle

build_script:
  - gradlew.bat assemble --info --no-daemon

# Post-install test scripts.
test_script:
  # Output useful info for debugging.
  - node --version
  - npm --version
  - npm install -g nyc
  - nyc npm test
  - npm run build-wrappers
  - npm run build-input-project
  - npm install -g gulp
  - gradlew.bat test check gradleTest --info --no-daemon
  - gradlew.bat --version
  - gulp run-java-tests
# Don't actually build.
build: off
cache:
  - C:\Users\appveyor\.gradle
