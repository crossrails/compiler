env: 
- NODE_VERSION="6" GIT_SSH_KEY="ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCaybxeFtzSR+SWWJvnUtLbWS4HaBeRSIO3nJfJgMQOA0tscWUPwSz00Wxk3Jelvib2MII3pP/g0Xg0i0I1egJZI7lc9HSb0cHKd/sJHVXqu6DEwJOy791r7JbDKLZq5+20SsNcT7WFQiRW3wkHwKSfAefEWxr05DzgLZZBLgdt8dBa+3EiCqg9qvXdVMj7K1bjjocyCEdYmfDwxHt6wJ8Ti/skvRZBHAVQqjnkQZwWjIm6vKuDUJLct4NNpjx8gVBTIOl1gf7W0Pq5F8IhnBGSvYnhoGdXNyN8bhnEbrSKZxbx5Ah8TC3MwH+RxKdE/P6THC8hghvAJ889dUfTgngiOvnYCG2blDMlbBH3afNJooo8kpKzww2vgvxToEsmm9c3FTedurDyhO9Mjr9ID7Dp6H8dni0cL87PenKMookXvOjSTsPDQVAnJgK7BAjx9C2QEwdwHhppzvt7P7Zd13i9YmYl2OdZDkqe/nt/RSz00WYjgWrT1k3sIuBo3P9ezJcs2aGAQZML1O95UbltGmBgc0Q2onRA5g59BWD1oZt6VzgHeRMlCGDBc5PVDWi41qx+G4ByJ06JViKw/iC0VYb4snb4WuqtFCAspTuIsXLixbQoEtR6rw9yF9M83gXEbLY7M9Rv2kTCZTaEL+Abyrk+b83ZoalYBC3HIFV4YudD5Q== travis@Travis"
addons:
  code_climate:
    repo_token: 786c6e2d6de4f43ab281eb2660a0ae3c977a993e675bdef839d59c04ea6147a3
before_install:
  - brew update
  - brew tap caskroom/cask
  - brew cask install java
  - brew install nvm
  - brew install gradle
install: 
  - "nvm install $NODE_VERSION"
  - "node --version"
  - "npm install"
  - "npm install -g nyc"
  - "nyc npm test"
  - "npm run build-wrappers"
  - "npm run build-input-project"
  - "npm install -g codecov"
  - "npm install -g codeclimate-test-reporter"
  - "npm run create-code-coverage"
  - "npm run upload-code-coverage"
  - "npm run codacy"
  - "npm install -g gulp"
  - "export GIT_SSH=`ssh -i ~/.ssh/gitkey_rsa '$GIT_SSH_KEY'`"
  - "git config user.email 'travis@Travis' && cd wiki && mvn clean package && java -cp target/Wiki-1.0-SNAPSHOT.jar io.xrails.App && rm -rf compiler.wiki/ && git clone https://github.com/crossrails/compiler.wiki.git && mv wiki.md compiler.wiki/compiler-options.md && cd compiler.wiki/ && git add compiler-options.md && git commit -m 'Updated compiler options' && git push "
#  - "gulp run-java-tests"
#  - "gulp gen-markdown"
language: objective-c
osx_image: xcode8
script:
  - set -o pipefail && xcodebuild -project tests/swift/swift.xcodeproj -scheme src build test | xcpretty
notifications:
  webhooks:
    urls:
    - https://webhooks.gitter.im/e/6ccaf0c916c1b3bfe8a5
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: false     # default: false
